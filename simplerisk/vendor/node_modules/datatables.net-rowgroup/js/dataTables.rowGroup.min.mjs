/*! RowGroup 1.5.2
 * Â© SpryMedia Ltd - datatables.net/license
 */
import jQuery from"jquery";import DataTable from"datatables.net";let $=jQuery;var RowGroup=function(t,r){if(!DataTable.versionCheck||!DataTable.versionCheck("1.11"))throw"RowGroup requires DataTables 1.11 or newer";this.c=$.extend(!0,{},DataTable.defaults.rowGroup,RowGroup.defaults,r),this.s={dt:new DataTable.Api(t)},this.dom={};r=this.s.dt.settings()[0],t=r.rowGroup;if(t)return t;(r.rowGroup=this)._constructor()};$.extend(RowGroup.prototype,{dataSrc:function(t){var r;return void 0===t?this.c.dataSrc:(r=this.s.dt,this.c.dataSrc=t,$(r.table().node()).triggerHandler("rowgroup-datasrc.dt",[r,t]),this)},disable:function(){return this.c.enable=!1,this},enable:function(t){return!1===t?this.disable():(this.c.enable=!0,this)},enabled:function(){return this.c.enable},_constructor:function(){var e=this,t=this.s.dt,o=t.settings()[0],a=$("div.dt-scroll-body",t.table().container()),n=(t.on("draw.dtrg",function(t,r){e.c.enable&&o===r&&(e._draw(),n)&&a.scrollTop()&&(a.scrollTop(n),n=null)}),t.on("column-visibility.dt.dtrg responsive-resize.dt.dtrg",function(){e._adjustColspan()}),t.on("destroy",function(){t.off(".dtrg")}),null);a.length&&t.on("preDraw",function(){n=a.scrollTop()})},_adjustColspan:function(){$("tr."+this.c.className,this.s.dt.table().body()).find("th:visible, td:visible").attr("colspan",this._colspan())},_colspan:function(){return this.s.dt.columns().visible().reduce(function(t,r){return t+r},0)},_draw:function(){var t=this.s.dt,t=this._group(0,t.rows({page:"current"}).indexes());this._groupDisplay(0,t)},_group:function(t,r){for(var e,o=Array.isArray(this.c.dataSrc)?this.c.dataSrc:[this.c.dataSrc],a=DataTable.util.get(o[t]),n=this.s.dt,s=[],i=0,u=r.length;i<u;i++){var l,d=r[i];null==(l=a(n.row(d).data(),t))&&(l=this.c.emptyDataGroup),void 0!==e&&l===e||(s.push({dataPoint:l,rows:[]}),e=l),s[s.length-1].rows.push(d)}if(void 0!==o[t+1])for(i=0,u=s.length;i<u;i++)s[i].children=this._group(t+1,s[i].rows);return s},_groupDisplay:function(t,r){for(var e,o=this.s.dt,a=0,n=r.length;a<n;a++){var s,i=r[a],u=i.dataPoint,l=i.rows;this.c.startRender&&(e=this.c.startRender.call(this,o.rows(l),u,t),s=this._rowWrap(e,this.c.startClassName,t))&&s.insertBefore(o.row(l[0]).node()),this.c.endRender&&(e=this.c.endRender.call(this,o.rows(l),u,t),s=this._rowWrap(e,this.c.endClassName,t))&&s.insertAfter(o.row(l[l.length-1]).node()),i.children&&this._groupDisplay(t+1,i.children)}},_rowWrap:function(t,r,e){return null==(t=null!==t&&""!==t?t:this.c.emptyDataGroup)?null:("object"==typeof t&&t.nodeName&&"tr"===t.nodeName.toLowerCase()?$(t):t instanceof $&&t.length&&"tr"===t[0].nodeName.toLowerCase()?t:$("<tr/>").append($("<th/>").attr("colspan",this._colspan()).attr("scope","row").append(t))).addClass(this.c.className).addClass(r).addClass("dtrg-level-"+e)}}),RowGroup.defaults={className:"dtrg-group",dataSrc:0,emptyDataGroup:"No group",enable:!0,endClassName:"dtrg-end",endRender:null,startClassName:"dtrg-start",startRender:function(t,r){return r}},RowGroup.version="1.5.2",$.fn.dataTable.RowGroup=RowGroup,$.fn.DataTable.RowGroup=RowGroup,DataTable.Api.register("rowGroup()",function(){return this}),DataTable.Api.register("rowGroup().disable()",function(){return this.iterator("table",function(t){t.rowGroup&&t.rowGroup.enable(!1)})}),DataTable.Api.register("rowGroup().enable()",function(r){return this.iterator("table",function(t){t.rowGroup&&t.rowGroup.enable(void 0===r||r)})}),DataTable.Api.register("rowGroup().enabled()",function(){var t=this.context;return!(!t.length||!t[0].rowGroup)&&t[0].rowGroup.enabled()}),DataTable.Api.register("rowGroup().dataSrc()",function(r){return void 0===r?this.context[0].rowGroup.dataSrc():this.iterator("table",function(t){t.rowGroup&&t.rowGroup.dataSrc(r)})}),$(document).on("preInit.dt.dtrg",function(t,r,e){var o,a;"dt"===t.namespace&&(t=r.oInit.rowGroup,o=DataTable.defaults.rowGroup,t||o)&&(a=$.extend({},o,t),!1!==t)&&new RowGroup(r,a)});export default DataTable;