/*
 Highcharts Stock JS v9.3.3 (2022-02-01)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Karol Kolodziej

 License: www.highcharts.com/license
*/
'use strict';(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/indicators/klinger",["highcharts","highcharts/modules/stock"],function(l){b(l);b.Highcharts=l;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function l(b,g,f,l){b.hasOwnProperty(g)||(b[g]=l.apply(null,f))}b=b?b._modules:{};l(b,"Stock/Indicators/MultipleLinesComposition.js",[b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],
function(b,g){var f=b.seriesTypes.sma,l=g.defined,n=g.error,r=g.merge,k;(function(g){function k(c){var a,d=[];c=c||this.points;if(this.fillGraph&&this.nextPoints){if((a=f.prototype.getGraphPath.call(this,this.nextPoints))&&a.length){a[0][0]="L";d=f.prototype.getGraphPath.call(this,c);a=a.slice(0,d.length);for(var m=a.length-1;0<=m;m--)d.push(a[m])}}else d=f.prototype.getGraphPath.apply(this,arguments);return d}function q(){var c=this,a=c.linesApiNames,d=c.areaLinesNames,m=c.points,h=c.options,e=c.graph,
w={options:{gapSize:h.gapSize}},g=[],p=c.getTranslatedLinesNames(c.pointValKey),k=m.length,t;p.forEach(function(c,a){for(g[a]=[];k--;)t=m[k],g[a].push({x:t.x,plotX:t.plotX,plotY:t[c],isNull:!l(t[c])});k=m.length});if(this.userOptions.fillColor&&d.length){var q=p.indexOf(v(d[0]));q=g[q];d=1===d.length?m:g[p.indexOf(v(d[1]))];p=c.color;c.points=d;c.nextPoints=q;c.color=this.userOptions.fillColor;c.options=r(m,w);c.graph=c.area;c.fillGraph=!0;b.seriesTypes.sma.prototype.drawGraph.call(c);c.area=c.graph;
delete c.nextPoints;delete c.fillGraph;c.color=p}a.forEach(function(a,d){g[d]?(c.points=g[d],h[a]?c.options=r(h[a].styles,w):n('Error: "There is no '+a+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names." at mixin/multiple-line.js:34'),c.graph=c["graph"+a],f.prototype.drawGraph.call(c),c["graph"+a]=c.graph):n('Error: "'+a+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")});c.points=m;c.options=h;c.graph=
e;f.prototype.drawGraph.call(c)}function u(c){var a=[];(this.pointArrayMap||[]).forEach(function(d){d!==c&&a.push(v(d))});return a}function v(a){return"plot"+a.charAt(0).toUpperCase()+a.slice(1)}function e(a){var c=[];(this.pointArrayMap||[]).forEach(function(d){c.push(a[d])});return c}function a(){var a=this,d=a.pointArrayMap,m=[],h;m=a.getTranslatedLinesNames();f.prototype.translate.apply(a,arguments);a.points.forEach(function(c){d.forEach(function(d,b){h=c[d];a.dataModify&&(h=a.dataModify.modifyValue(h));
null!==h&&(c[m[b]]=a.yAxis.toPixels(h,!0))})})}var d=[],m=["bottomLine"],h=["top","bottom"],w=["top"];g.compose=function(c){if(-1===d.indexOf(c)){d.push(c);var b=c.prototype;b.linesApiNames=b.linesApiNames||m.slice();b.pointArrayMap=b.pointArrayMap||h.slice();b.pointValKey=b.pointValKey||"top";b.areaLinesNames=b.areaLinesNames||w.slice();b.drawGraph=q;b.getGraphPath=k;b.toYData=e;b.translate=a;b.getTranslatedLinesNames=u}return c}})(k||(k={}));return k});l(b,"Stock/Indicators/Klinger/KlingerIndicator.js",
[b["Stock/Indicators/MultipleLinesComposition.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,g,f){var l=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return b(e,a)};return function(e,a){function d(){this.constructor=e}b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),n=g.seriesTypes,r=
n.sma,k=n.ema,q=f.correctFloat,x=f.error;n=f.extend;var y=f.isArray,u=f.merge;f=function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;a.data=void 0;a.points=void 0;a.options=void 0;a.volumeSeries=void 0;return a}l(e,b);e.prototype.calculateTrend=function(a,d){return a[d][1]+a[d][2]+a[d][3]>a[d-1][1]+a[d-1][2]+a[d-1][3]?1:-1};e.prototype.isValidData=function(a){var d=this.chart,b=this.options,h=this.linkedParent;a=y(a)&&4===a.length;(d=this.volumeSeries||(this.volumeSeries=d.get(b.params.volumeSeriesID)))||
x("Series "+b.params.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,h.chart);return!(![h,d].every(function(a){return a&&a.xData&&a.xData.length>=b.params.slowAvgPeriod})||!a)};e.prototype.getCM=function(a,d,b,h,e){return q(d+(b===h?a:e))};e.prototype.getDM=function(a,d){return q(a-d)};e.prototype.getVolumeForce=function(a){var d=[],b=1;var h=0;var e=a[0][1]-a[0][2];var c=0;for(b;b<a.length;b++){var f=this.calculateTrend(a,b);var g=this.getDM(a[b][1],a[b][2]);h=this.getCM(h,g,f,c,e);c=this.volumeSeries.yData[b]*
f*Math.abs(2*(g/h-1))*100;d.push([c]);c=f;e=g}return d};e.prototype.getEMA=function(a,b,e,h,f,c,g){return k.prototype.calculateEma(g||[],a,"undefined"===typeof c?1:c,h,b,"undefined"===typeof f?-1:f,e)};e.prototype.getSMA=function(a,b,e){return k.prototype.accumulatePeriodPoints(a,b,e)/a};e.prototype.getValues=function(a,b){var d=[],e=a.xData;a=a.yData;var f=[],c=[],g=[],l,k=0,n=0,r=void 0,v=void 0,u=null;if(this.isValidData(a[0])){var p=this.getVolumeForce(a),x=this.getSMA(b.fastAvgPeriod,0,p),t=
this.getSMA(b.slowAvgPeriod,0,p),y=2/(b.fastAvgPeriod+1),z=2/(b.slowAvgPeriod+1);for(k;k<a.length;k++)k>=b.fastAvgPeriod&&(r=n=this.getEMA(p,r,x,y,0,k,e)[1]),k>=b.slowAvgPeriod&&(v=l=this.getEMA(p,v,t,z,0,k,e)[1],l=q(n-l),g.push(l),g.length>=b.signalPeriod&&(u=g.slice(-b.signalPeriod).reduce(function(a,b){return a+b})/b.signalPeriod),d.push([e[k],l,u]),f.push(e[k]),c.push([l,u]));return{values:d,xData:f,yData:c}}};e.defaultOptions=u(r.defaultOptions,{params:{fastAvgPeriod:34,slowAvgPeriod:55,signalPeriod:13,
volumeSeriesID:"volume"},signalLine:{styles:{lineWidth:1,lineColor:"#ff0000"}},dataGrouping:{approximation:"averages"},tooltip:{pointFormat:'<span style="color: {point.color}">\u25cf</span><b> {series.name}</b><br/><span style="color: {point.color}">Klinger</span>: {point.y}<br/><span style="color: {point.series.options.signalLine.styles.lineColor}">Signal</span>: {point.signal}<br/>'}});return e}(r);n(f.prototype,{areaLinesNames:[],linesApiNames:["signalLine"],nameBase:"Klinger",nameComponents:["fastAvgPeriod",
"slowAvgPeriod"],pointArrayMap:["y","signal"],parallelArrays:["x","y","signal"],pointValKey:"y"});b.compose(f);g.registerSeriesType("klinger",f);"";return f});l(b,"masters/indicators/klinger.src.js",[],function(){})});
//# sourceMappingURL=klinger.js.map